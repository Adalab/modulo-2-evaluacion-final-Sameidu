"use strict";const searchInput=document.querySelector(".js_form_input"),searchBtn=document.querySelector(".js_form_button"),form=document.querySelector(".js-form"),charactersList=document.querySelector(".js_characters_list"),favoutitesList=document.querySelector(".js_favourite_list"),resetBtn=document.querySelector(".js-remove");let listCharacters=[],listFavourites=[];function renderOneCharacter(e){let r="";return r=-1===listFavourites.findIndex(r=>r.char_id===e.char_id)?"":"fav",`<li class="card"> <article class="js_card_article ${r} card_article" id="${e.char_id}">\n    <img class="card_article-img"src="${e.img}">\n     <h2 class="card_article-name">${e.name}</h2>\n     <p class="card_article-status">${e.status}</p>\n     </article></li>`}function renderAllCharacters(e){let r="";for(let t=0;t<e.length;t++)r+=renderOneCharacter(e[t]);charactersList.innerHTML=r,charactersListeners()}function renderFavouritesCharacters(){let e="";for(let r=0;r<listFavourites.length;r++)e+=renderOneCharacter(listFavourites[r]);favoutitesList.innerHTML=e}function charactersListeners(){const e=document.querySelectorAll(".js_card_article");for(const r of e)r.addEventListener("click",handleClickArticle)}function handleClickArticle(e){e.currentTarget.classList.toggle("fav");const r=listCharacters.find(r=>r.char_id===parseInt(e.currentTarget.id)),t=listFavourites.findIndex(r=>r.char_id===parseInt(e.currentTarget.id));-1===t?listFavourites.push(r):listFavourites.splice(t,1),localStorage.setItem("fav",JSON.stringify(listFavourites)),renderFavouritesCharacters()}form.addEventListener("submit",e=>{e.preventDefault()}),searchBtn.addEventListener("click",()=>{const e=searchInput.value.toLowerCase();console.log(e);renderAllCharacters(listCharacters.filter(r=>r.name.toLowerCase().includes(e)))}),resetBtn.addEventListener("click",e=>{e.preventDefault()}),renderAllCharacters(listCharacters),fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{listCharacters=e,renderAllCharacters(listCharacters)});const savedFavourites=JSON.parse(localStorage.getItem("fav"));console.log(savedFavourites),null!==savedFavourites&&(listFavourites=savedFavourites,renderFavouritesCharacters());